
Base :: {
    server: {
        http: {
            host: String,
            port: Int,
            headers: {
                cors: Bool,
                cache: Bool
            }
        },
        https: {
            port: Int
        }
    },
    logging: {
        level: String,
        format: String
    }
}

Prod :: {
    server: {
        http: {
            host: String,
            headers: {
                cache: Bool
            }
        },
        https: {
            enabled: Bool
        }
    },
    logging: String
}


base := {
    server: {
        http: {
            host: "localhost",
            port: 8080,
            headers: {
                cors: true,
                cache: false
            }
        },
        https: {
            enabled: false,
            port: 8443
        }
    },
    logging: {
        level: "info",
        format: "json"
    }
}


prod:Prod = {
    server: {
        http: {
            host: "prod.example.com",
            headers: {
                cache: true
            }
        },
        https: {
            enabled: true
        }
    },
    logging: "stdout"
}

result: Base & Prod = {
    logging: {format: "format", level: "level"} , 
    server: {
        http: {
            headers: {
                cache: false, 
                cors: true
            }, 
        host: "gator", 
        port: 8000
        }, 
        https: {
            enabled: true,
            port: 8000
        }
    }
}

out base & prod

